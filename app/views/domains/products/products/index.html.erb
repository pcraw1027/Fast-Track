
<h3>Products</h3>
<table class="table table-striped table-bordered table-hover table-sm container-fluid">
  <thead class="thead-dark">
    <tr>
      <th>Company</th>
      <th>Name</th>
      <th>Images</th>
      <th>Barcode</th>
      <th>Size</th>
      <th>Segment</th>
      <th>Family</th>
      <th>Class</th>
      <th>Brick</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @products.each do |product| %>
      <tr>
        <td><%= product.company.name if product.company %></td>
        <td><%= product.name %></td>

    <td>
   
           <% product.product_variants.each do |product_variant| %>

         
          <% product_variant.media.each do |media| %>
        
            <% if media.image? && media.file.present? %>
              <%= image_tag media.file.thumb.url, style: "width: 50px; height: 50px;" %>
            <% elsif media.video? && media.file.present? %>
              <video controls>
                <source src="<%= media.file.url %>" type="video/mp4">
              </video>
            <% elsif media.file.present? %>
              <%= link_to 'download file', media.file.url %>
            <% end %>
          
            <% end %>

     
        <% end %>

       </td>



        <td><%= product.product_variants.map(&:barcode).join(", ") %></td>
        <td><%= product.size %></td>
        <td><%= product.segment.title if product.segment%></td>
        <td><%= product.family.title if product.family %></td>
        <td><%= product.klass.title if product.klass %></td>
        <td><%= product.brick.title if product.brick %></td>
        <td><%= link_to 'View', product %></td>
        <td><%= link_to 'Edit', edit_domains_products_product_path(product) %></td>

      </tr>
    <% end %>
  </tbody>
</table>

<br>
<nav aria-label="Page navigation">
  <%= will_paginate @products, renderer: BootstrapPagination::Rails,
      class: 'pagination justify-content-center' %>
</nav>

<%= link_to 'New Product', product_capture_interface_path, class: "action-btn" %>


